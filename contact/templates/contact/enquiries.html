{% extends "base.html" %}
{% load static %}

{% block extracss %}
<link rel="stylesheet" href="{% static 'profiles/css/profile.css' %}">
{% endblock %}

{% block page_header %}
<div class="container header-container">
    <div class="row">
        <div class="col"></div>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="overlay"></div>
<div class="container">
    <div class="row">
        <div class="col">
            <hr>
            <h2 class="mb-4">Enquiries</h2>
            <hr>
        </div>
    </div>
    
    <div class="past-orders table-responsive">
    <table class="table table-sm table-borderless">
        <thead>
            <tr>
                <th>Enquiry #</th>
                <th>Date</th>
                <th>From</th>
                <th>Email</th>
                <th>Subject</th>
                <th>Message</th>
                <th>Order #</th>
                <th>Dimensions</th>
                <th>Image</th>
            </tr>
        </thead>
        <tbody>
        {% for enquiry in contact_list  %}
        <tr>
          <th scope="row">{{ forloop.counter }}</th>
          <td>{{ enquiry.date }}</td>
          <td>
            <a href="#">{{ enquiry.full_name }}</a>
          </td>
          <td>{{ enquiry.email }}
          </td>
          <td>{{ enquiry.subject }}
          </td>
          <td class="d-none d-md-table-cell">{{ enquiry.body|truncatechars:50}}
          </td>
          <td>
            <a href="#">{{ enquiry.order_number}}</a>
          </td>
          <td>{{ enquiry.dimensions }}
          </td>
          <td>
          {% if enquiry.image %}
          <div class="image-container my-5">
            <a href="{{ enquiry.image.url }}" target="_blank">
                <img class="card-img-top img-fluid" src="{{ enquiry.image.url  }}" alt="{{ item.name }}">
            </a>
            {% else %}
            <p>N/A</p>
          </div>  
            {% endif %}
          </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}